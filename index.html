<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VirginAI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="" rel="stylesheet">
  <style>
    :root{
      --bg:#000000;
      --card:#0a0a0a;
      --gold:#c9a44a;
      --gold-soft:#9f8740;
      --border:#1a1a1a;
      --text:#eaeaea;
      --muted:#888;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      height:100vh;
      background:var(--bg);
      color:var(--text);
      font-family:'Inter', system-ui, sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      overflow:hidden;
    }
    .app{
      width:100%;
      max-width:560px;
      height:100vh;
      max-height:860px;
      background:linear-gradient(180deg,#050505,#000);
      border-radius:20px;
      border:1px solid var(--border);
      display:flex;
      flex-direction:column;
      padding:16px;
      box-shadow: 0 0 40px rgba(201,164,74,.08), inset 0 0 30px rgba(255,255,255,.02);
    }
    header{
      text-align:center;
      font-family:'Playfair Display', serif;
      font-size:1.6rem;
      letter-spacing:2px;
      color:var(--gold);
      padding:10px 0 14px;
    }
    header::after{
      content:'';
      display:block;
      width:60px;
      height:1px;
      margin:10px auto 0;
      background:linear-gradient(to right, transparent, var(--gold), transparent);
    }
    #chat{
      flex:1;
      overflow-y:auto;
      padding:14px;
      border-radius:16px;
      background:#020202;
      border:1px solid var(--border);
    }
    .msg{
      max-width:82%;
      margin:10px 0;
      padding:12px 14px;
      border-radius:14px;
      line-height:1.5;
      white-space:pre-wrap;
      word-wrap:break-word;
      animation:fade .25s ease;
    }
    .user{
      margin-left:auto;
      background:#111;
      border:1px solid #2a2a2a;
      color:#fff;
    }
    .ai{
      background:#050505;
      border:1px solid #2b2412;
      color:#ffffff; /* Answer text in white */
      font-family:"Courier New", monospace;
    }
    @keyframes fade{
      from{opacity:0;transform:translateY(4px)}
      to{opacity:1}
    }
    footer{
      margin-top:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    textarea{
      width:100%;
      min-height:70px;
      max-height:150px;
      resize:vertical;
      background:#020202;
      color:#fff;
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      outline:none;
      font-size:15px;
    }
    textarea::placeholder{
      color:var(--muted);
    }
    button{
      width:100%;
      padding:14px;
      border:none;
      border-radius:14px;
      background:linear-gradient(135deg,#d6b55c,#a98c3a);
      color:#000;
      font-size:15px;
      font-weight:600;
      cursor:pointer;
      letter-spacing:.4px;
    }
    button:active{
      transform:scale(.98);
    }
    @media(max-width:480px){
      .app{
        height:100vh;
        border-radius:0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>VIRGINAI</header>
    <div id="chat"></div>
    <footer>
      <textarea id="q" placeholder="Ask anything… "></textarea>
      <button onclick="ask()">Ask</button>
    </footer>
  </div>
  <script>
    const chat=document.getElementById("chat");
    const q=document.getElementById("q");
    function scrollDown(){
      chat.scrollTop=chat.scrollHeight;
    }
    function addUser(text){
      const d=document.createElement("div");
      d.className="msg user";
      d.textContent=text;
      chat.appendChild(d);
      scrollDown();
    }
    function addMatrixAI(text){
      const d=document.createElement("div");
      d.className="msg ai";
      chat.appendChild(d);
      let i=0;
      const speed=14;
      const interval=setInterval(()=>{
        d.textContent+=text[i];
        i++;
        scrollDown();
        if(i>=text.length) clearInterval(interval);
      },speed);
    }
    async function ask(){
      const text=q.value.trim();
      if(!text) return;
      addUser(text);
      q.value="";
      const loading=document.createElement("div");
      loading.className="msg ai";
      loading.textContent="Thinking…";
      chat.appendChild(loading);
      scrollDown();
      try{
        const r=await fetch("/ask",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({question:text})
        });
        const d=await r.json();
        loading.remove();
        addMatrixAI(d.answer);
      }catch{
        loading.remove();
        addMatrixAI("Network error. Please try again.");
      }
    }
    q.addEventListener("keydown",e=>{
      if(e.key==="Enter" && !e.shiftKey){
        e.preventDefault();
        ask();
      }
    });
  </script>
</body>
</html>
