<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VirginAI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
 box-sizing:border-box;
}

body{
 margin:0;
 height:100vh;
 display:flex;
 justify-content:center;
 align-items:center;
 background:#050505;
 font-family: "Segoe UI", Arial, sans-serif;
 color:#eaeaea;
}

.app{
 width:100%;
 max-width:520px;
 height:88vh;
 display:flex;
 flex-direction:column;
 background:linear-gradient(180deg,#0b0b0b,#111);
 border-radius:18px;
 padding:14px;
 box-shadow:0 0 40px rgba(0,255,200,0.08);
}

h2{
 text-align:center;
 margin:8px 0 12px;
 color:#00ffd5;
 font-weight:600;
 letter-spacing:1px;
}

#chat{
 flex:1;
 overflow-y:auto;
 padding:10px;
 background:#070707;
 border-radius:12px;
 box-shadow:inset 0 0 10px rgba(0,0,0,0.8);
 white-space:pre-wrap;
 scroll-behavior:smooth;
}

.msg{
 margin:10px 0;
 padding:10px 12px;
 border-radius:12px;
 max-width:85%;
 line-height:1.45;
 word-wrap:break-word;
}

.user{
 background:rgba(0,255,213,0.15);
 margin-left:auto;
 text-align:right;
 border-bottom-right-radius:4px;
}

.ai{
 background:rgba(255,255,255,0.08);
 margin-right:auto;
 border-bottom-left-radius:4px;
}

textarea{
 width:100%;
 min-height:70px;
 max-height:140px;
 resize:vertical;
 padding:12px;
 border-radius:12px;
 border:none;
 outline:none;
 margin-top:10px;
 font-size:15px;
 background:#0d0d0d;
 color:#eaeaea;
}

textarea::placeholder{
 color:#777;
}

button{
 margin-top:8px;
 padding:12px;
 border:none;
 border-radius:12px;
 font-size:16px;
 font-weight:600;
 cursor:pointer;
 background:linear-gradient(135deg,#00ffd5,#00bfa5);
 color:#000;
 transition:0.2s;
}

button:hover{
 opacity:0.9;
 transform:translateY(-1px);
}
</style>
</head>

<body>
<div class="app">
<h2>VirginAI</h2>

<div id="chat"></div>

<textarea id="q" placeholder="Ask anything… (new line supported)"></textarea>
<button onclick="ask()">Ask</button>
</div>

<script>
const chat = document.getElementById("chat");
const q = document.getElementById("q");

function add(text, cls){
 const d = document.createElement("div");
 d.className = "msg " + cls;
 d.textContent = text;
 chat.appendChild(d);
 chat.scrollTop = chat.scrollHeight;
}

async function ask(){
 const text = q.value.trim();
 if(!text) return;

 add(text, "user");
 q.value = "";

 const thinking = document.createElement("div");
 thinking.className = "msg ai";
 thinking.textContent = "Thinking…";
 chat.appendChild(thinking);
 chat.scrollTop = chat.scrollHeight;

 try{
  const r = await fetch("/ask", {
   method:"POST",
   headers:{"Content-Type":"application/json"},
   body:JSON.stringify({question:text})
  });

  const d = await r.json();
  thinking.remove();
  add(d.answer || "No response.", "ai");

 }catch(e){
  thinking.remove();
  add("Server error. Please try again.", "ai");
 }
}
</script>
</body>
</html>