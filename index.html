<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VirginAI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="VirginAI – Intelligent AI chatbot using Gemini and Groq.">

<style>
body{margin:0;height:100vh;background:#050505;color:#eaeaea;font-family:sans-serif}
.app{display:flex;flex-direction:column;height:100vh;padding:12px}
header{text-align:center;color:#c9a44a;font-size:22px}
#chat{flex:1;overflow-y:auto;border:1px solid #222;padding:10px}
.msg{margin:8px;padding:10px;border-radius:12px;white-space:pre-wrap}
.user{background:#111;margin-left:auto}
.ai{background:#050505;border:1px solid #00ffd544;font-family:monospace}
.input-bar{display:flex;gap:8px;margin-top:8px}
textarea{flex:1;resize:vertical;max-height:150px;background:#020202;color:#fff;border:1px solid #222}
button{width:50px;background:#c9a44a;border:none}
footer{text-align:center;font-size:11px;color:#777}
footer a{color:#c9a44a;text-decoration:none;margin:0 4px}
</style>
</head>

<body>
<div class="app">
<header>VIRGINAI</header>

<div id="chat"></div>

<div class="input-bar">
<textarea id="q" placeholder="Ask anything… (Shift+Enter = new line)"></textarea>
<button onclick="ask()">➤</button>
</div>

<footer>
<a href="/about.html">About</a> ·
<a href="/help.html">Help</a> ·
<a href="/developer.html">Developer</a> ·
<a href="/privacy.html">Privacy</a>
</footer>
</div>

<script>
const chat=document.getElementById("chat");
const q=document.getElementById("q");

function add(t,c){
 let d=document.createElement("div");
 d.className="msg "+c;
 d.textContent=t;
 chat.appendChild(d);
 chat.scrollTop=chat.scrollHeight;
 return d;
}

function type(el,t){
 let i=0;el.textContent="";
 let s=setInterval(()=>{
  el.textContent+=t[i++]||"";
  chat.scrollTop=chat.scrollHeight;
  if(i>=t.length) clearInterval(s);
 },14);
}

async function ask(){
 let t=q.value;
 if(!t.trim()) return;
 add(t,"user"); q.value="";
 let ai=add("Thinking…","ai");
 try{
  let r=await fetch("/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t})});
  let d=await r.json();
  type(ai,d.answer||"No response");
 }catch{
  type(ai,"Service unavailable.");
 }
}

q.addEventListener("keydown",e=>{
 if(e.key==="Enter" && !e.shiftKey){
  e.preventDefault(); ask();
 }
});

// Mobile back protection
let backOnce=false;
history.pushState(null,"",location.href);
window.onpopstate=()=>{
 if(!backOnce){
  backOnce=true;
  alert("Press back again to exit VirginAI");
  history.pushState(null,"",location.href);
  setTimeout(()=>backOnce=false,2000);
 }
};
</script>
</body>
</html>