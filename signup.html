<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up | VirginAI</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Create your VirginAI account">

<!-- FAVICON -->
<link rel="icon" href="/android-chrome-512x512.png">

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#050505;
  --panel:#0c0c0c;
  --border:#1e1e1e;
  --gold:#c9a44a;
  --text:#eaeaea;
  --muted:#9a9a9a;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family:Inter,Segoe UI,sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
}

/* CARD */
.card{
  width:100%;
  max-width:440px;
  background:linear-gradient(180deg,#0a0a0a,#0f0f0f);
  border:1px solid var(--border);
  border-radius:18px;
  padding:34px 28px;
  box-shadow:0 0 45px rgba(201,164,74,.08);
}

/* HEADER */
.brand{text-align:center;margin-bottom:24px}
.brand img{width:72px;border-radius:16px}
.brand h1{margin:10px 0 0;color:var(--gold);font-size:22px}
.brand p{margin-top:6px;font-size:13px;color:var(--muted)}

/* INPUT */
.input{margin-bottom:14px}
.input label{font-size:13px;color:#bcbcbc;display:block;margin-bottom:6px}
.input input{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#080808;
  color:var(--text);
  font-size:14px;
}
.input input:focus{border-color:var(--gold);outline:none}

/* BUTTON */
.btn{
  width:100%;
  padding:13px;
  border-radius:14px;
  border:none;
  font-size:15px;
  font-weight:500;
  cursor:pointer;
}
.btn-main{
  background:linear-gradient(135deg,#c9a44a,#9f8740);
  color:#000;
}

/* SOCIAL */
.social{
  background:#000;
  border:1px solid var(--border);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  margin-bottom:10px;
}
.social img{width:18px}

/* DIVIDER */
.divider{text-align:center;margin:18px 0;font-size:12px;color:var(--muted)}

/* FOOTER */
.footer{text-align:center;font-size:12px;color:var(--muted)}
.footer a{color:var(--gold);text-decoration:none}

/* SPINNER */
.loader{
  display:none;
  width:22px;
  height:22px;
  border:3px solid #000;
  border-top:3px solid transparent;
  border-radius:50%;
  animation:spin 1s linear infinite;
  margin:auto;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="card">

  <div class="brand">
    <img src="/android-chrome-512x512.png">
    <h1>VirginAI</h1>
    <p>Create your account</p>
  </div>

  <form id="signupForm">
    <div class="input">
      <label>Full Name</label>
      <input id="name" required>
    </div>

    <div class="input">
      <label>Date of Birth</label>
      <input id="dob" type="date" required>
    </div>

    <div class="input">
      <label>Email</label>
      <input id="email" type="email" required>
    </div>

    <div class="input">
      <label>Password</label>
      <input id="password" type="password" minlength="6" required>
    </div>

    <button class="btn btn-main" id="emailBtn">
      <span id="emailText">Create Account</span>
      <div class="loader" id="emailLoader"></div>
    </button>
  </form>

  <div class="divider">OR</div>

  <button class="btn social" id="googleBtn">
    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
    Continue with Google
  </button>

  <button class="btn social" id="appleBtn">
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/31/Apple_logo_white.svg">
    Continue with Apple
  </button>

  <div class="footer">
    Already have an account?
    <a href="/login.html">Login</a>
  </div>

</div>

<!-- FIREBASE LOGIC -->
<script type="module">
import { auth, db } from "./firebase.js";
import {
  createUserWithEmailAndPassword,
  updateProfile,
  GoogleAuthProvider,
  OAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const emailBtn=document.getElementById("emailBtn");
const emailLoader=document.getElementById("emailLoader");
const emailText=document.getElementById("emailText");

function loading(on){
  emailLoader.style.display=on?"block":"none";
  emailText.style.display=on?"none":"inline";
}

/* EMAIL SIGNUP */
document.getElementById("signupForm").addEventListener("submit",async(e)=>{
  e.preventDefault();
  loading(true);

  try{
    const name=document.getElementById("name").value;
    const dob=document.getElementById("dob").value;
    const email=document.getElementById("email").value;
    const pass=document.getElementById("password").value;

    const cred=await createUserWithEmailAndPassword(auth,email,pass);
    await updateProfile(cred.user,{displayName:name});

    await setDoc(doc(db,"users",cred.user.uid),{
      name,email,dob,provider:"password",createdAt:Date.now()
    });

    location.href="/";
  }catch(err){
    alert(err.message);
    loading(false);
  }
});

/* GOOGLE */
document.getElementById("googleBtn").onclick=async()=>{
  try{
    const r=await signInWithPopup(auth,new GoogleAuthProvider());
    await setDoc(doc(db,"users",r.user.uid),{
      name:r.user.displayName,
      email:r.user.email,
      provider:"google",
      createdAt:Date.now()
    },{merge:true});
    location.href="/";
  }catch(e){alert(e.message);}
};

/* APPLE */
document.getElementById("appleBtn").onclick=async()=>{
  try{
    const r=await signInWithPopup(auth,new OAuthProvider("apple.com"));
    await setDoc(doc(db,"users",r.user.uid),{
      name:r.user.displayName||"Apple User",
      email:r.user.email||"",
      provider:"apple",
      createdAt:Date.now()
    },{merge:true});
    location.href="/";
  }catch(e){alert(e.message);}
};
</script>

</body>
</html>